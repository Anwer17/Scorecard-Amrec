<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live House Championship Scoreboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        .bar-animate { transition: width 1.5s cubic-bezier(0.34, 1.56, 0.64, 1); }
        body { background: #0f172a; }
        .house-card { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body class="text-white min-h-screen p-10 flex flex-col items-center">
    <div class="w-full max-w-6xl">
        <header class="text-center mb-16">
            <h1 class="text-6xl font-black italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 uppercase drop-shadow-2xl">
                HOUSING MATCHES 2026
            </h1>
            <p class="text-blue-300 font-bold tracking-[0.5em] uppercase mt-2">Official Live Standings</p>
        </header>

        <div id="leaderboard" class="grid grid-cols-1 gap-8">
            <div class="house-card p-6 rounded-3xl">
                <div class="flex justify-between items-end mb-4">
                    <span class="text-3xl font-bold text-yellow-400 tracking-wider">AL BAIRUNI</span>
                    <span id="score-AL_BAIRUNI" class="text-5xl font-black">0</span>
                </div>
                <div class="w-full bg-gray-900 rounded-full h-12 overflow-hidden border border-gray-700">
                    <div id="bar-AL_BAIRUNI" class="bar-animate h-full bg-gradient-to-r from-yellow-600 to-yellow-300 shadow-[0_0_30px_rgba(234,179,8,0.3)]" style="width: 0%"></div>
                </div>
            </div>

            <div class="house-card p-6 rounded-3xl">
                <div class="flex justify-between items-end mb-4">
                    <span class="text-3xl font-bold text-red-500 tracking-wider">IBN-E-BATUTA</span>
                    <span id="score-IBN_E_BATUTA" class="text-5xl font-black">0</span>
                </div>
                <div class="w-full bg-gray-900 rounded-full h-12 overflow-hidden border border-gray-700">
                    <div id="bar-IBN_E_BATUTA" class="bar-animate h-full bg-gradient-to-r from-red-700 to-red-400 shadow-[0_0_30px_rgba(220,38,38,0.3)]" style="width: 0%"></div>
                </div>
            </div>

            <div class="house-card p-6 rounded-3xl">
                <div class="flex justify-between items-end mb-4">
                    <span class="text-3xl font-bold text-blue-500 tracking-wider">IBN-E-FADLAN</span>
                    <span id="score-IBN_E_FADLAN" class="text-5xl font-black">0</span>
                </div>
                <div class="w-full bg-gray-900 rounded-full h-12 overflow-hidden border border-gray-700">
                    <div id="bar-IBN_E_FADLAN" class="bar-animate h-full bg-gradient-to-r from-blue-700 to-blue-400 shadow-[0_0_30px_rgba(37,99,235,0.3)]" style="width: 0%"></div>
                </div>
            </div>

            <div class="house-card p-6 rounded-3xl">
                <div class="flex justify-between items-end mb-4">
                    <span class="text-3xl font-bold text-green-500 tracking-wider">NASIR AL KHUSRAW</span>
                    <span id="score-NASIR_AL_KHUSRAW" class="text-5xl font-black">0</span>
                </div>
                <div class="w-full bg-gray-900 rounded-full h-12 overflow-hidden border border-gray-700">
                    <div id="bar-NASIR_AL_KHUSRAW" class="bar-animate h-full bg-gradient-to-r from-green-700 to-green-400 shadow-[0_0_30px_rgba(22,163,74,0.3)]" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="mt-16 bg-black/50 p-8 rounded-3xl border border-white/10 text-center">
            <h3 class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-3">Live Result Notification</h3>
            <div id="ticker" class="text-3xl font-medium italic text-white animate-pulse">
                Ready for the first race!
            </div>
        </div>
    </div>

    <script>
        // PASTE YOUR FIREBASE CONFIG HERE
        const firebaseConfig = {
                apiKey: "AIzaSyD9hgPwH9w_Z6pf6raGzXT2LShihR2-lfA",
                authDomain: "live-scorecard-amrec.firebaseapp.com",
                projectId: "live-scorecard-amrec",
                storageBucket: "live-scorecard-amrec.firebasestorage.app",
                messagingSenderId: "1087081955486",
                appId: "1:1087081955486:web:6f57336b51fb0d122f3b8f",
                measurementId: "G-9PZJRL460X"
                };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        db.ref('scores').on('value', (snap) => {
            const data = snap.val() || {};
            const max = 2000; // Adjust based on your total points expectation

            ['AL_BAIRUNI', 'IBN_E_BATUTA', 'IBN_E_FADLAN', 'NASIR_AL_KHUSRAW'].forEach(h => {
                const score = data[h] || 0;
                document.getElementById(`score-${h}`).innerText = score;
                document.getElementById(`bar-${h}`).style.width = Math.min((score / max) * 100, 100) + '%';
            });
        });

        db.ref('lastWin').on('value', (snap) => {
            const win = snap.val();
            if(win) {
                document.getElementById('ticker').innerHTML = `<span class="text-yellow-400">${win.name}</span> (Class ${win.class}) won ${win.pts}pts in the ${win.race}!`;
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.8 } });
            }
        });
    </script>
</body>
</html>